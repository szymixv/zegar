<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Odliczanie</title>

    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
        (function() {
            emailjs.init("TWÓJ_PUBLIC_KEY");
        })();
    </script>

    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #000;
            color: #fff;
            font-family: "Segoe UI", Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
        }

        #nameBox {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        input {
            padding: 10px;
            font-size: 1rem;
            border: none;
            outline: none;
        }

        button {
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            border: none;
        }

        #timer {
            font-size: 4rem;
            margin-top: 20px;
            display: none;
        }

        #goButton {
            display: none;
            margin-top: 30px;
            padding: 12px 28px;
            background-color: #fff;
            color: #000;
        }
    </style>
</head>
<body>

    <div id="nameBox">
        <h2>Podaj swoje imię:</h2>
        <input type="text" id="username" placeholder="Twoje imię">
        <button onclick="startProcess()">Start</button>
    </div>

    <div id="timer"></div>
    <button id="goButton" onclick="window.location.href='https://szymixv.github.io/slonce/'">PRZEJDŹ</button>

<script>
    const START_TIME = 10;

    function startProcess() {
        const name = document.getElementById("username").value.trim();
        if (!name) return alert("Podaj imię!");

        // Dane urządzenia
        const device = navigator.userAgent;
        const language = navigator.language;
        const resolution = window.screen.width + "x" + window.screen.height;
        const time = new Date().toLocaleString();

        // Wysyłka maila w tle — NIE BLOKUJE STRONY
        emailjs.send("TWOJE_SERVICE_ID", "TWOJE_TEMPLATE_ID", {
            name: name,
            device: device,
            language: language,
            resolution: resolution,
            time: time
        })
        .then(() => {
            console.log("Email wysłany");
        })
        .catch(err => {
            console.log("EmailJS błąd:", err);
        });

        // Strona działa dalej niezależnie od EmailJS
        document.getElementById("nameBox").style.display = "none";
        startTimer();
    }

    function startTimer() {
        let remaining = START_TIME;
        const timer = document.getElementById("timer");
        const button = document.getElementById("goButton");

        timer.style.display = "block";

        const interval = setInterval(() => {
            timer.textContent = remaining;
            remaining--;

            if (remaining < 0) {
                clearInterval(interval);
                button.style.display = "inline-block";
            }
        }, 1000);
    }
</script>
    

</body>
</html>
